# -*- coding: utf-8 -*-
"""preprocess_colab.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1HsEmDtXo72d-8nA8XURmPiSZT3CcArH4
"""

import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns
from google.colab import files

"""Importar dataset"""

depressao = files.upload()

df = pd.read_csv('student_depression_dataset.csv')

df.info()

"""Eliminação de colunas

"""

df = df.drop(columns=['id', 'Profession', 'Work Pressure', 'Job Satisfaction'])


df.isna().sum()

df.describe().T

df = df.drop(columns=['Degree'])

for col in df.columns:
  print(f'{col}: {df[col].unique()}')

binaryMap = {"No":0, "Yes":1, "Male":0, "Female":1}

SleepMap = {"'5-6 hours'":5.5 ,"'Less than 5 hours'":4, "'7-8 hours'":7.5, "'More than 8 hours'":9}

DietMap = {'Healthy':0, 'Moderate':1, 'Unhealthy':2}

df_clean = df[~df.isin(['?', 'Others'])]
df_clean.dropna(inplace=True)

df_clean['Gender'] = df_clean['Gender'].map(binaryMap)
df_clean['Sleep Duration'] = df_clean['Sleep Duration'].map(SleepMap)
df_clean['Dietary Habits'] = df_clean['Dietary Habits'].map(DietMap)
df_clean['Family History of Mental Illness'] = df_clean['Family History of Mental Illness'].map(binaryMap)
df_clean['Have you ever had suicidal thoughts ?'] = df_clean['Have you ever had suicidal thoughts ?'].map(binaryMap)

for col in df_clean.columns:
  print(f'{col}: {df_clean[col].unique()}')

df_clean.info()

"""Matriz de correlação"""

plt.figure(figsize=(11, 8))
sns.heatmap(df_clean.corr(), annot=True, cmap='coolwarm', fmt='.2f')
plt.show()

df_clean.to_csv('df_cleann.csv', index=False)